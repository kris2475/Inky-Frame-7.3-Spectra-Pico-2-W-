# Inky Frame 7.3" Spectra Pico 2 W - Complete Guide

## Executive Summary

This repository provides a complete end-to-end workflow for streaming images from a PC to the Inky Frame 7.3" Spectra display using a Raspberry Pi Pico 2 W. It includes all necessary steps: image preparation on a PC, serving the image over HTTP, configuring Wi-Fi credentials, and streaming/displaying the image on the Pico. Additionally, it provides guidance on optimising colour accuracy for the e-ink display. This guide references supporting documents to provide detailed instructions and troubleshooting information.

## Introduction

The Inky Frame 7.3" Spectra is an 8-colour e-ink display designed for rich, low-power image presentation. Using the Raspberry Pi Pico 2 W and specialised Pimoroni MicroPython firmware, users can stream images over Wi-Fi from their PC to the Inky Frame. This repository consolidates scripts, configuration, and documentation to simplify this process.

### Key Features
- Converts standard images (JPG, PNG) into 8-colour raw format compatible with Inky Frame.
- Serves the image from a PC using a simple HTTP server.
- Connects the Pico 2 W to Wi-Fi and streams image data pixel-by-pixel.
- Guidance for improving colour matching and display vibrancy.
- Modular structure with separate scripts for clarity and maintainability.

## Repository Structure

```
Inky-Frame-7.3-Spectra-Pico-2-W/
│
├── setup.md               # Hardware and firmware setup instructions
├── image_prep.py          # PC image preprocessing script
├── image_data.dat         # Raw image data (generated by image_prep.py)
├── secrets.py             # Wi-Fi credentials (user-provided)
├── boot.py                # Pico entry point
├── image_display.py       # Main Pico app to fetch and display images
├── HTTP_Server_Setup.md   # Instructions to serve image_data.dat from PC
├── Troubleshooting.md     # Guide for common issues
└── README.md              # Overall introduction and links (this document)
```

## Getting Started

### 1. Hardware Setup
Refer to [`setup.md`](setup.md) for detailed hardware assembly and firmware installation instructions for the Pico 2 W and Inky Frame 7.3" Spectra.

### 2. Image Preparation
Use [`image_prep.py`](image_prep.py) to convert your source images into the raw format (`image_data.dat`) required by the display.

```python
prepare_image("your_image.png")
```

### 3. HTTP Server Setup
Host the raw image on your PC using a simple Python HTTP server. Follow [`HTTP_Server_Setup.md`](HTTP_Server_Setup.md) for step-by-step instructions, including firewall configuration and IP addressing.

### 4. Wi-Fi Credentials
Create a `secrets.py` file on the Pico W with your Wi-Fi SSID and password. Instructions are provided in [`HTTP_Server_Setup.md`](HTTP_Server_Setup.md).

### 5. Pico Execution
Upload `boot.py` and `image_display.py` to the root of your Pico W using Thonny. `boot.py` will automatically run the display script on start-up.

### 6. Improving Colour Accuracy

The Inky Frame 7.3" Spectra uses an 8-colour e-ink palette, which is more limited and less vibrant than typical LCD or OLED displays. Images may appear darker or less saturated. To achieve better colour matching:

#### 6.1 Adjust Image Brightness and Contrast
- Increase brightness and contrast before quantisation using an image editor or within `image_prep.py`.

#### 6.2 Use a Custom Palette Mapping
- Modify the RGB values in `image_prep.py` to better map the colours of your original image to the 8-colour palette.

#### 6.3 Dithering Options
- Floyd-Steinberg dithering is used by default. Experiment with different methods or disable dithering (`dither=Image.Dither.NONE`) to find the optimal effect for your image.

#### 6.4 Test and Iterate
- Save intermediate quantised images to preview the colour palette before sending to the display.

### 7. Colour Optimisation Process for Inky Frame 7.3" Spectra

The objective of this final tuning stage is to maximise the display's limited 8-colour palette, ensuring your vibrant source image is represented accurately and dynamically. A time-saving approach was implemented: after every adjustment to the script, a local PNG preview (`preview_quantized.png`) was generated on the PC, allowing instant visualisation of the colour mapping and dithering before committing to the 15–30 second refresh cycle on the physical display.

#### Iteration 1: `image_prep_enhanced1` – Addressing the "Dark" Image

| Variable | Detail of Adjustment | Rationale |
|----------|-------------------|-----------|
| Brightness/Contrast | Aggressive increase (Brightness ×1.5, Contrast ×1.3) | E-ink screens are reflective and inherently darker. Boosting tones forces colours into the brighter range of the palette. |
| Dithering | Tested with `Image.Dither.ADAPTIVE` | To find a blending algorithm that brightens initial colour representation. |

Result: The image was brighter, but still saturated with Taupe/Grey and Orange.

#### Iteration 2: `image_prep_enhanced2` – Solving Grey Bias

| Variable | Detail of Adjustment | Rationale |
|----------|-------------------|-----------|
| Palette | Surgical removal of Taupe/Grey, reducing palette to 7 colours | Eliminates grey dominance, forcing vibrant primaries to represent neutral areas. |
| Dithering | Disabled (`Image.Dither.NONE`) | To preview raw effect without blending. |

Result: Grey dominance eliminated, but image looked blocky and washed out.

#### Iteration 3: `image_prep_enhanced3` – Achieving Optimal Smoothness

| Variable | Detail of Adjustment | Rationale |
|----------|-------------------|-----------|
| Palette | Maintained 7-colour palette | Maximises saturation and avoids neutral dominance. |
| Dithering | Re-enabled Floyd-Steinberg | Mixes neighbouring pixels to create illusion of intermediate shades, restoring texture and smoothness. |
| Enhancement | Finalised (Brightness ×1.4, Contrast ×1.2) | Balances visibility and colour integrity post-blending. |

Final Result: The current settings represent the most accurate and vibrant conversion achievable for the Inky Frame 7.3" Spectra, validated using the local PNG preview method.

### 8. Troubleshooting
Refer to [`Troubleshooting.md`](Troubleshooting.md) for common issues related to Wi-Fi connectivity, server access, or display refresh.

### 9. Notes and Recommendations
- Ensure the Pico W has sufficient power (use a wall adapter, not a computer USB port).
- Keep the HTTP server terminal open during image streaming.
- Follow the recommended folder and repository structure to avoid path issues.
- Keep `secrets.py` private and out of version control.

### References
- [Pimoroni Inky Frame MicroPython firmware](https://shop.pimoroni.com/products/inky-frame-7-3-spectra)
- [Original repository by kris2475](https://github.com/kris2475/Inky-Frame-7.3-Spectra-Pico-2-W-)

### License
This repository inherits the licence from the original project by kris2475. Refer to the `LICENSE` file for details.
